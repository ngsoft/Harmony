#!/bin/bash
# Handle keystrokes
# Sends Commands to activities

[ ! -r /etc/default/harmony ] && echo "Harmony Remote Daemon not installed, please run hrmy-setup."  && exit 1
. /etc/default/harmony
. $prefix/usr/lib/harmony/utils

#using harmonyd ?
if ! echo $PATH | grep -q "lib/harmony"; then
    export DISPLAY=:0
    export PATH=$prefix/bin:$prefix/usr/lib/harmony:$PATH
    export logfile
fi

usage(){
    throw_error "Usage: $(basename ${BASH_SOURCE[0]}) <KEY>"
}

[ -n "$1" ] || usage
[ -d $profile_root ] || exit 1

reserved="^(ON|OFF|REBOOT|SLEEP|SCREEN|ALARM|WWW)$"

if [[ $1 =~ $reserved ]]; then
    [ -e $profile_root/keyhandler.sh ] && bash $profile_root/keyhandler.sh $1
    exit 0
fi



